[[_TOC_]]

# CMDB
## Baremetal

1. Владелец
* Контакт ответственного за продукт (CPO, PO, PM, Team Lead, QA Lead, Architect...)
* Профиль сотрудника на team.wb.ru - EID

2. Команда сопровождения
   (обязательна для инфраструктурного сервиса) - указывается ID команды, которая будет поддерживать/администрировать данный сервис.

3. Окружение
* dev
* stage
* prod
  
4. Список согласующих
* Профиль WB Team 
* Employe Id
* Контакт WB Band
  
5. Метки телепорта
* env
* team
* owner
* product 
* и остальные при наличии
  
6. Описание
Для каких целей используется данный ресурс
В особенности, является ли машина гипервизором (proxmox/cloud); к какому кластеру принадлежит
размещена ли на машине СУБД; к какому кластеру принадлежит (по global_inventory)

7. Serial Number
Для Bare Metal серверов – серийный номер оборудования

8.
-установленные сетевые адаптеры

-их MAC адреса

10. OS
Версия ОС/версия ядра ОС, установленной на bare metal сервере или виртуальной машине

11. Название
 укажите название КЕ, не используя точки. Максимальная длина названия - 100 символов.

12. Модель

13. UUID

14. Device height

15. Netbox device id

16. Vendor






## VM Cloud
1. Название проекта

2. Имя и версия образа

3. Внутренний IP-адрес и внешний(если имеется)

4. IP адреса и fqdn принадлежащие ресурсу

5. Зона доступности

6. ДЦ размещения ресурса

7. Netbox device id

8. TPM2 Endorsement Certificate (с описанием версия ТРМ и модель мат платы)
   TPM2 Endorsement Certificate*. Сертификат модуля безопасности, подписанный на CA производителя. Не является секретной информацией. Получить на debian/ubuntu можно выводом следующей команды: sudo apt install tpm2-tools openssl && openssl x509 -in <(tpm2_nvread 0x1c00002) -text
* В случае невозможности получения Endorsement Certificate
Версия TPM: cat /sys/class/tpm/tpm*/tpm_version_major
Модель материнской платы: sudo dmidecode -t 2

9. [Статус](https://cmdb-ingress-controller.cmdb.svc.k8s.dldevel/docs/kef/statuseske.html)
   
10. Описание
11. Модель
12. UUID
13. Тип виртуализации
14. ПО виртуализации




## Namespaces
Поля (данные) необходимые в новом типе КЕ в CMDB:
1. ID (тянуть уникальный UID из кластера k8s)
2. Имя ns (Имя K8s namespace = Имя подгруппы GitLab = имя каталога Vault)
3. Статус (есть ns в кластере , то статус “В эксплуатации”, нет ns в кластере а ранее был , то статус “Выключен”)
4. Дата создания ns  в кластере k8s
5. Лимиты PODS
6. Лимиты CPU
7. Лимиты RAM
8. CMDB ID (каждому уникальному UID присваивается свой cmdb id)
9. Комментарий/Описание.
10. Owner
11. Тег/пометка (объединяющее поле).
